# A library for managing experiments

If you are doing research in Computer Science, it is very likely that every now and then, you need to run experiments on your computer. LabPal is a Java library that allows you to quickly setup an environment for running these experiments, collating their results and processing them in various ways: generating tables, data files, plots, etc.

## LabPal features

LabPal is the result of many years of work done at the [Laboratoire d'informatique formelle](http://liflab.ca) (LIF), a Computer Science reserach lab at [Université du Québec à Chicoutimi](http://www.uqac.ca). It includes a number of innovative features:

- All your experimental setup (including your code, its input files and library dependencies) can be bundled into a single, runnable JAR file, making it easy for anybody to download and re-run your experiments.
- The runnable JAR acts as a **web server**; when launched, it allows a user to see all the experiments and control their execution using a web browser.
- Automated generation of plots (using [GRAL](http://trac.erichseifert.de/gral) or [Gnuplot](http://gnuplot.info)) and tables (in beautified LaTeX, HTML or CSV) from data generated by the experiments.

## Why use LabPal?

In order to run experiments on a computer, you probably already write command-line scripts for various tasks: generating your data, saving it into text files, process and display them as plots or tables to include in a paper or a presentation. But soon enough, your handful of "quick and dirty" batch files becomes a bunch of arcane, poorly documented scripts that generate and pass around various kinds of obscure temporary files. This may do the job, but this situation brings two important problems in terms of research methodology:

- **Problem 1: no one can reproduce your experiments.** Too much cleaning up would be required to your setup before anybody else could understand how it works, so chances are you'll never make your scripts and data publicly available. This is **bad**: science should be all about being able to reproduce someone's experiments; working in such a way is arguably not very scientific.

- **Problem 2: you waste your time.** Most of your batch and data files are so specific to your experiments that even yourself are unlikely to reuse any of them on your next project. In the long term, you end up repeatedly writing code that does the same few things: crunching text files, piping data to graphing software, generating LaTeX tables from them, etc. This is not a very productive use of your time.

## Learn LabPal in five minutes

LabPal is easy enough to use that you can get up and running in a couple of minutes. Let's see how.

As a simple example, suppose you want to measure empirically how long it takes to check if a given number *n* is prime, for various values of *n*. To do so, you first need to create an **experiment**. An experiment is an object that can take input *parameters*, can be *run*, and produces one or more output *values*. In LabPal, experiments all descend from the class... `Experiment`. In our example:

- Our experiment will take a single input parameter, which is the number we wish to check for primality. Setting an input parameter is done by calling the method `setInput`, which associates to a parameter *name* a particular *value*. 
- When being run, the actual primality test should be executed. An experiment must implement the method `execute`: this is where that code should be written.
- Our experiment produces a single output value, which corresponds to the time it takes to check that particular number. Writing an output value is done by calling the method `write`, which associates to a *name* a particular *value*.

Therefore, a sensible way to create our experiment would be to write this:

<pre>
<code>
class MyExperiment extends Experiment {

  public MyExperiment(long n) {
    setInput("Number", n);
  }
  
  public void execute() {
    long n = read("Number");
    long start = System.currentTimeMillis();
    // Code for checking n...
    long end = System.currentTimeMillis();
    write("Time", end - start);
  }
}
</code>
</pre>

The constructor receives a number, and sets its as an input parameter of the experiment with name "Number". Method `execute` first reads the input parameter (the number), then checks if this number is prime (not shown). This code is surrounded by two calls to get the current system time. Finally, the total duration is written as an output data and is given the name "Time".

We are now ready to create a **laboratory** ("lab" for short), which will be the environment in which many of these **experiments** will be run. In LabPal, a lab is a descendent of the `Laboratory` class. Experiments are created in a method called `setupExperiments`, and are added to the lab by a call to method `add`. Our lab could hence look like this:

<pre>
<code>
class MyLab extends Laboratory {

  public void setupExperiments() {
    add(new MyExperiment(10));
    add(new MyExperiment(100));
    add(new MyExperiment(1000));
  }
  
  public static void main(String[] args) {
    initialize(args, MyLab.class);
  }
}
</code>
</pre>

<!-- :wrap=soft:mode=markdown: -->