<!DOCTYPE HTML>
<html lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="author" content="Sylvain Hallé">
  <title>Creating plots - LabPal</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="../css/poole.css">
  <link rel="stylesheet" href="../css/syntax.css">
  <link rel="stylesheet" href="../css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="../css/custom.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="../favicon.ico">
  
  <!-- Syntax highlighting -->
  <link rel="stylesheet" href="../assets/js/styles/default.css">
  <script src="../assets/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- RSS -->
  <!-- <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> -->
  
  <!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  // tracker methods like "setCustomDimension" should be called before "trackPageView"
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//leduotang.ca/piwik/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->
</head>
  <body class="layout-reverse theme-base-0e">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" checked>

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
  <img src="../images/labpal-175.png" alt="LabPal">
  <p>LabPal is a library for running experiments on a computer and process their results.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="../">Home</a>
    <a class="sidebar-nav-item" href="../manual/quick-tutorial.html">Quick tutorial</a>
    <a class="sidebar-nav-item" href="../videos.html">Videos</a>
    <a class="sidebar-nav-item" href="../manual/index.html">User manual</a>
    <a class="sidebar-nav-item" href="https://github.com/liflab/labpal/releases/latest">Download</a>
    <a class="sidebar-nav-item" href="https://github.com/liflab/labpal">GitHub project</a>
    <span class="sidebar-nav-item">Currently v2.7</span>
  </nav>

  <div class="sidebar-item">
    <p>
      © 2014-2017 Sylvain Hallé. All rights reserved.
    </p>
  </div>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="../" title="Home">LabPal</a>
            <small>Run experiments on a computer</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <h2>Creating plots</h2>        <p>
  <a href="index.html">User Manual</a>
</p>



<p>LabPal provides various ways of displaying the results of experiments graphically, using plots. In this section, you will learn about:</p>

<ul>
<li><a href="#types">Plot types</a></li>
<li><a href="#libraries">Plot libraries</a></li>
<li><a href="#gral-custom">Customizing GRAL plots</a></li>
<li><a href="#palettes">Palettes</a></li>
</ul>

<p>The way of creating plots is generally this:</p>

<ol>
<li>An experiment table is created and associated to experiments from the lab</li>
<li>An instance of the <a href="../doc/ca/uqac/lif/labpal/plot/Plot.html">Plot</a> object is created and given a table --along with an optional <a href="../doc/ca/uqac/lif/labpal/table/TableTransformation.html">TableTransformation</a> to apply before plotting.</li>
</ol>

<p>The creation and transformation of tables is covered in its <a href="tables.html">own section</a>. Here we focus on the creation and customization of plots from existing tables.</p>

<h3>
  <a name="types">Plot types</a>
</h3>

<p>Currently, LabPal supports the following types of plots:</p>

<ul>
<li><a href="#scatterplot">Scatterplots</a></li>
<li><a href="#piechart">Pie charts</a></li>
<li><a href="#clusteredhistogram">Clustered bar plots</a></li>
</ul>

<h3>
  <a name="libraries">Plot libraries</a>
</h3>

<p>LabPal uses two programs to generate plots.</p>

<ul>
<li>The first is the <a href="http://trac.erichseifert.de/gral/">GRAL</a> graphing library, which comes bundled with it. When using GRAL-based plots, LabPal is stand-alone and does not require any external programs to display the generated pictures.</li>
<li>The second is <a href="http://gnuplot.info">Gnuplot</a>, a powerful plotting program. Contrarily to GRAL, Gnuplot is an external software that does not come with LabPal. In order to display Gnuplot-based plots, the host system must have Gnuplot installed and executable from the command line. When run on a machine that does not have Gnuplot, the corresponding plots can be created, but cannot be shown.</li>
</ul>

<p>Some types of plots (such as scatterplots) are available in both "flavours"; others can only be created by one of the tools. For example, Gnuplot cannot create pie charts, while GRAL cannot create clustered bar plots.</p>

<h3>
  <a name="2d">Two-dimensional plots</a>
</h3>

<p>Every two-dimensional plot has a few common methods that can be used to customize it:</p>

<ul>
<li>
<code>setCaption</code> can give a caption to either the <em>x</em> or the <em>y</em> axis of the graph</li>
<li>
<code>setTitle</code> can give a title to the plot (which is generally displayed above it). The title is also used when showing the list of plots in the web and the text console. By default, a plot takes the same name as the table it is given.</li>
<li>
<code>setLogscale</code>: can instruct to plot an axis using a logarithmic, instead of a linear scale</li>
</ul>

<h4>Scatterplots</h4>

<p>A scatterplot is a two-dimensional plot of points. Given a table, the <em>(x,y)</em> coordinates of the points are defined as follows:</p>

<ul>
<li>The first column of the table is the set of <em>x</em> values</li>
<li>The remaining columns are data series, each defining a value of <em>y</em>. Normally, the points of each data series are painted in a different color (see Palettes).</li>
</ul>

<p>For example, when given to a scatterplot, the following table:</p>

<table border="1">
<tbody>
<tr>
<th>n</th>
<th>A</th>
<th>B</th>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>1</td>
<td>2</td>
<td>3</td>
</tr>
<tr>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
</tbody>
</table>

<p>will generate a plot with the points (0,1), (1,2), (2,3) painted in one color (corresponding to data series "A"), and the points (0,0), (1,3), (2,4) painted in another color (corresponding to data series "B").</p>

<p>A scatterplot is created like this:</p>

<pre><code>Table t = ...
ca.uqac.lif.labpal.plot.Scatterplot plot = new Scatterplot(t);
</code>
</pre>

<p>The first occurrence of <code>Scatterplot</code> refers to the <em>interface</em>, while the second occurrence refers to a specific implementation of this interface. Normally, this is either <code>ca.uqac.lif.labpal.gral.Scatterplot</code> to use the GRAL version, or <code>ca.uqac.lif.labpal.gnuplot.Scatterplot</code> for the Gnuplot version.</p>

<h4>Clustered histograms</h4>

<p>TODO</p>

<h4>Pie charts</h4>

<p>TODO</p>

<h3>
  <a name="gral-custom">Customizing GRAL plots</a>
</h3>

<p>If these basic plot customization functions are not sufficient, it is possible to access to the complete GRAL library by directly manipulating the underlying Plot object. There are two ways of doing this.</p>

<h4>Light customization</h4>

<p>If the basic plot is correct, but one wishes simply to perform some "touching up", a simple way is to override the <code>customize</code> method. For example, the Scatterplot class does not provide a way of changing the border width of the plot; however, this can be done by overriding <code>customize</code> and setting it using GRAL primitives:</p>

<pre><code>Table t = ...
ca.uqac.lif.labpal.plot.Scatterplot plot = new Scatterplot(t) {
  public void customize(de.erichseifert.gral.plots.Plot plot) {
    plot.setInsets(new Insets2D.Double(20d, 60d, 60d, 40d));
  }
}
</code>
</pre>

<h4>Heavier customization</h4>

<p>For heavier customization, or to create a plot that GRAL supports but for which there exists no corresponding LabPal object, one can simply create a class that extends <a href="../doc/ca/uqac/lif/labpal/plot/gral/GralPlot.html">GralPlot</a>, and implement the <code>getPlot</code> method. This allows the user to create and setup any plot provided by GRAL and associate it with a DataSource corresponding to the table being passed to the plot. For example, the following code creates a GRAL RasterPlot object and changes the font used for displaying it.</p>

<pre><code>GralPlot plot = new GralPlot(t) {
  public de.erichseifert.gral.plots.Plot getPlot(DataSource source) {
    DataSource rasterdata = RasterPlot.createRasterData(source);
    RasterPlot p = new RasterPlot(rasterdata);
    p.setFont(new Font("Jokerman", Font.PLAIN, 35));
    return p;
  }
}
add(plot);
</code>
</pre>

<p>Once created, this plot can be managed by LabPal like any other plot.</p>

<h3>
  <a name="palettes">Palettes</a>
</h3>

<p>The colours associated to each data series in a plot can be customized using a <a href="../doc/ca/uqac/lif/labpal/plot/Palette.html">Palette</a>. A palette is simply a map between numbers and colours; when drawing data series, a plot will use the first colour of the palette for the first series, the second colour for the second series, and so on. (If there are more series than colours in the palette, the palette index restarts from the beginning.)</p>

<p>The <a href="../doc/ca/uqac/lif/labpal/plot/Plot.html">Plot</a> object contains a few predefined palettes, which you can refer statically (for example, <code>Palette.QUANTITATIVE_1</code> or <code>Palette.EGA</code>). To instruct a plot to use a specific palette, it can be passed by a call to method <code>setPalette</code>.</p>

<p>One can also create their own palettes by creating a descendent of the <code>Palette</code> class, and defining their own set of colours.</p>

<!-- :wrap=soft:mode=markdown: -->
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  

</body>
</html>
