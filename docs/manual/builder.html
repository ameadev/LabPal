<!DOCTYPE HTML>
<!DOCTYPE html><html lang="en-us">
<head>
<link href="http://gmpg.org/xfn/11" rel="profile">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<!-- Enable responsiveness on mobile devices--><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="author" content="Sylvain Hall&eacute;">
<title>Including external results - LabPal</title>
<!-- CSS --><link rel="stylesheet" href="../css/poole.css">
<link rel="stylesheet" href="../css/syntax.css">
<link rel="stylesheet" href="../css/lanyon.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
<link rel="stylesheet" href="../css/custom.css">
<!-- Icons --><link rel="apple-touch-icon-precomposed" sizes="144x144" href="../apple-touch-icon-precomposed.png">
<link rel="shortcut icon" href="../favicon.ico">
<!-- Syntax highlighting --><link rel="stylesheet" href="../assets/js/styles/default.css">
<script src="../assets/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script><!-- RSS --><!-- <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> -->
</head>
<body class="layout-reverse theme-base-0e">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" checked><!-- Toggleable sidebar --><div class="sidebar" id="sidebar">
  <div class="sidebar-item">
  <img src="../images/labpal-175.png" alt="LabPal"><p>LabPal is a library for running experiments on a computer and process their results.</p>
  </div>

  <nav class="sidebar-nav"><a class="sidebar-nav-item" href="../">Home</a>
    <a class="sidebar-nav-item" href="../manual/quick-tutorial.html">Quick tutorial</a>
    <a class="sidebar-nav-item" href="../videos.html">Videos</a>
    <a class="sidebar-nav-item" href="../manual/index.html">User manual</a>
    <a class="sidebar-nav-item" href="https://github.com/liflab/labpal/releases/latest">Download</a>
    <a class="sidebar-nav-item" href="https://github.com/liflab/labpal">GitHub project</a>
    <span class="sidebar-nav-item">Currently v2.7</span>
  </nav><div class="sidebar-item">
    <p>
      &copy; 2014-2017 Sylvain Hall&eacute;. All rights reserved.
    </p>
  </div>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="../" title="Home">LabPal</a>
            <small>Run experiments on a computer</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <h2>Including external results</h2>        <p>
  <a href="index.html">User Manual</a>
</p>



<p>Very often, you are running experiments in order to compare your work with existing results: is my algorithm running faster? Does my procedure provide better precision/recall? Etc.</p>

<p>LabPal provides a convenient way to include existing results and process them side by side with the new results that are generated by your experiments. The principle is simple: it suffices to create new experiments that do not run anything, and rather directly output pre-recorded results.</p>

<h3>
  <a name="manual">By hand</a>
</h3>

<p>This can be done by hand. For example, suppose you found this table that advertises sorting times for a (fictional) new algorithm called the "Blabla Sort":</p>

<table border="1"><tr><th>Array size</th>
    <th>Time (ms)</th>
  </tr><tr><td>1000</td>
    <td>14</td>
  </tr><tr><td>2000</td>
    <td>24</td>
  </tr></table><p>You would like to plot these results along with the ones computed by your existing sort experiments. To this end, we can create a new experiment class:</p>

<pre><code>public class BlablaSort extends Experiment {
  public BlablaSort(int size, int time) {
    setInput("Algorithm", "Blabla Sort");
    setInput("Size", size);
    write("Time", time);
    setStatus(Status.DONE);
  }
  
  public void execute() {
  }
}
</code>
</pre>

<p>Note how this experiment "hard-codes" its output parameter "Time" directly from a value passed to the constructor, instead of performing an actual sorting and measuring its duration. In consequence, there is nothing to do in method <code>run</code>, as the output results for this experiment are already generated. (As a side note, the constructor also already sets the experiment's state to DONE.)</p>

<p>From this point on, instances of BlablaSort can be added to SortingLab, included into tables and plots, like any other experiment.</p>

<h3>
  <a name="file">Automatically from a file</a>
</h3>

<p>A more systematic way of creating "pre-executed" experiments is to use the <a href="../doc/ca/uqac/lif/labpal/ExperimentBuilder.html">ExperimentBuilder</a>. First, instead of hard-coding the data in the lab's setup method, let us move it into a text file called <code>blabla.txt</code>:</p>

<pre>
# Sorting times for BlaBla Sort
# Fetched from the following paper: ...

Size*   Time
---------------------
1000    14
2000    24
</pre>

<p>Let us now change the class BlablaSort so that it implements the interface <code>CloneableExperiment</code>. A cloneable experiment must implement a method called <code>newExperiment</code>, which is expected to return a new, empty instance of this class.</p>

<pre><code>public class BlablaSort extends Experiment implements CloneableExperiment&lt;BlablaSort&gt; {
  public class BlablaSort() {
    setInput("Algorithm", "Blabla Sort");
    setStatus(Status.DONE);
  }
  public void execute() {
  }
  public BlablaSort newExperiment() {
    return new BlablaSort();
  }
}
</code>
</pre>

<p>We are now ready to use the <code>ExperimentBuilder</code> to automatically create instances of <code>BlablaSort</code> by filling their data from the contents of the text file. In our lab:</p>

<pre><code>
public void setup() {
  ExperimentBuilder&lt;BlablaSort&gt; builder = new ExperimentBuilder&lt;BlablaSort&gt;(new BlablaSort());
  Scanner scanner = new Scanner(FileHelper.internalFileToStream(this.getClass(), "blabla.txt"));
  try {
    Set&lt;BlablaSort&gt; experiments = builder.buildExperiments(scanner);
  } catch (ParseException e) {
  }
  ...
}
</code>
</pre>

<p>Let us examine what this code does:</p>

<ul><li>The first line creates a new ExperimentBuilder, which will create instances of experiments of class BlablaSort</li>
<li>The second line opens a scanner to the text file we created</li>
<li>The third line passes this scanner to the builder. In response, the builder returns a set of <strong>two</strong> BlablaSort experiments. These experiments can then be manipulated like all the others: added to the lab, to a table, etc. (An exception is thrown if the file is incorrectly formatted.)</li>
</ul><p>Where do these two experiments come from? They have been instantiated from the contents of <code>blabla.txt</code>.</p>

<ul><li>Blank lines, lines that start with "#" and "----" are ignored</li>
<li>The first non-ignored line is expected to contain a tab-separated list of parameter names</li>
<li>All remaining non-ignored lines are interpreted as parameter values for one new experiment instance. For example, line "1000  14" will produce a new BlablaSort experiment with parameter "Size" set to 1000, and parameter "Time" set to 14.</li>
</ul><p>Since BlablaSort "simulates" sorting by an algorithm, "Size" should be interpreted as an <em>input</em> parameter, while "Time" is rather an output parameter. This distinction can be made in the text file by putting a star at the end of input parameter names.</p>

<p>As we have seen, a possible use of the ExperimentBuilder is to include experiments made from existing results fetched from some external source (research paper, database). In such a case, the <code>execute</code> method of the experiment is empty. However, the ExperimentBuilder can be used to instantiate any experiment, including experiments that need to be run. For example, one can use a text file to define the set of input parameters to be given to experiments, instead of creating them manually in the lab's <code>setup</code> method.</p>

<!-- :wrap=soft:mode=markdown: -->      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>



<!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  // tracker methods like "setCustomDimension" should be called before "trackPageView"
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//leduotang.ca/piwik/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script><!-- End Piwik Code -->
</body>
</html>