<!DOCTYPE HTML>
<html lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="author" content="Sylvain Hallé">
  <title>Managing files - LabPal</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="../css/poole.css">
  <link rel="stylesheet" href="../css/syntax.css">
  <link rel="stylesheet" href="../css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">
  <link rel="stylesheet" href="../css/custom.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="../favicon.ico">
  
  <!-- Syntax highlighting -->
  <link rel="stylesheet" href="../assets/js/styles/default.css">
  <script src="../assets/js/highlight.pack.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- RSS -->
  <!-- <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> -->
  
  <!-- Piwik -->
<script type="text/javascript">
  var _paq = _paq || [];
  // tracker methods like "setCustomDimension" should be called before "trackPageView"
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="//leduotang.ca/piwik/";
    _paq.push(['setTrackerUrl', u+'piwik.php']);
    _paq.push(['setSiteId', '3']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Piwik Code -->
</head>
  <body class="layout-reverse theme-base-0e">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox" checked>

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
  <img src="../images/labpal-175.png" alt="LabPal">
  <p>LabPal is a library for running experiments on a computer and process their results.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="../">Home</a>
    <a class="sidebar-nav-item" href="../manual/quick-tutorial.html">Quick tutorial</a>
    <a class="sidebar-nav-item" href="../videos.html">Videos</a>
    <a class="sidebar-nav-item" href="../manual/index.html">User manual</a>
    <a class="sidebar-nav-item" href="https://github.com/liflab/labpal/releases/latest">Download</a>
    <a class="sidebar-nav-item" href="https://github.com/liflab/labpal">GitHub project</a>
    <span class="sidebar-nav-item">Currently v2.7</span>
  </nav>

  <div class="sidebar-item">
    <p>
      © 2014-2017 Sylvain Hallé. All rights reserved.
    </p>
  </div>
</div>

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="../" title="Home">LabPal</a>
            <small>Run experiments on a computer</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <h2>Managing files</h2>        <p>
  <a href="index.html">User Manual</a>
</p>



<p>So far, our running examples did not need any external file to be run; if they did, they were generated dynamically as <a href="experiments.html#prerequisites">prerequisites</a>. However, a laboratory can also be bundled with additional files that can be read by your Java code.</p>

<p>If you are using the <a href="https://github.com/liflab/labpal-project">template project</a> (which we recommend), the lab's source files are organized like this:</p>

<pre>  <code>/labpal-project
  Readme.md
  /Source
    /src
      MyLaboratory.java
      MyExperiment.java
      ...
    /bin
</code>
</pre>

<p>If you with to include data files or other resources in your lab, simply put them somewhere under the <code>src</code> folder where your source files are located. We call these files <em>internal</em> resources; the way to access these files is slightly different from normal files somewhere else in your computer.</p>

<h3>
  <a name="filehelper">Using the FileHelper</a>
</h3>

<p>LabPal contains a class called <a href="../doc/ca/uqac/lif/labpal/FileHelper.html">FileHelper</a>, which provides a number of methods for manipulating files. To access internal resources, you must use either of these methods:</p>

<ul>
<li>internalFileToBytes</li>
<li>internalFileToString</li>
<li>internalFileToStream</li>
</ul>

<p>Suppose for example that your lab contains an image file, <code>bird.jpg</code>, located directly in the "src" folder. To read that file as an array of bytes, you would do the following:</p>

<pre><code>byte[] contents = FileHelper.internalFileToBytes(MyLaboratory.class, "bird.jpg");
</code>
</pre>

<p>The first argument passed to the method is a class; FileHelper uses this class to fetch the desired file relative to some location in the project. Since MyLaboratory is located in the "src" folder, the file path given as an argument will be relative to this folder.</p>

<p>You can obviously create folders in your project; for example, put the image files into a subfolder called "images":</p>

<pre>  <code>/labpal-project
  Readme.md
  /Source
    /src
      MyLaboratory.java
      MyExperiment.java
      /images
        bird.jpg
    /bin
</code>
</pre>

<p>Simply mention the full path to the resource when reading it:</p>

<pre><code>byte[] contents = FileHelper.internalFileToBytes(MyLaboratory.class, "images/bird.jpg");
</code>
</pre>

<h3>
  <a name="bundle">Bundling internal resources</a>
</h3>

<p>The template project comes with an Ant build script that compiles the lab. At the command line, simply type:</p>

<pre>  <code>$ ant
</code>
</pre>

<p>This will create a JAR file called <code>my-lab.jar</code> (or something else if you changed the settings in <code>config.xml</code>).</p>

<p>A nice feature of internal resources is that they are bundled <strong>inside the JAR</strong>. As a matter of fact, if you open the file in an archive manager, you will see that all the internal files you put in your <code>src</code> folder are there, organized in exactly the same way. Therefore, the JAR file is not just an executable program: it also acts as the archive for your data files.</p>

<p>This greatly simplifies the execution of your lab by somebody else. There is no need for a user to copy files in specific locations before running the experiments: the lab comes with its own internal, mini-filesystem.</p>

<!-- :wrap=soft:mode=markdown: -->
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  

</body>
</html>
